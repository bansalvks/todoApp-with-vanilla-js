"use strict";var CommonUtility={parseJson:function(r){try{return JSON.parse(r)}catch(r){return null}},JsonToString:function(r){try{return JSON.stringify(r)}catch(r){return null}}};
"use strict";var KeysConst={TODO_LIST:"TODO_LIST"};
"use strict";var LocalStorageServices={GET:function(o){return localStorage[o]},SET:function(o,r){localStorage[o]=r}};
"use strict";function TaskModel(t,e){this.id=(new Date).getTime(),this.text=t,this.isDone=e}
"use strict";function TodoServices(){this.tasks=CommonUtility.parseJson(LocalStorageServices.GET(KeysConst.TODO_LIST))||[],this.saveLocally=function(){LocalStorageServices.SET(KeysConst.TODO_LIST,CommonUtility.JsonToString(this.tasks))},this.add=function(t){this.tasks.push(t),this.saveLocally(),this.notify()},this.remove=function(s){this.tasks=this.tasks.filter(function(t){return t.id!==s}),this.saveLocally(),this.notify()},this.update=function(s,t,i){var n=this.tasks.find(function(t){return t.id===s});n.text=t||n.text,n.isDone=void 0!==i?i:n.isDone,this.saveLocally(),this.notify()},this.getAll=function(){return this.tasks},this.subscribers=[],this.addEventListener=function(t){this.subscribers.push(t)},this.removeEventListener=function(t){},this.notify=function(){this.subscribers.forEach(function(t){t()})}}
"use strict";var TodoUiService={renderTasks:function(a,e,r,o,u){var l=this;a.innerHTML="",e.forEach(function(e){var n=document.createElement("button"),t=document.createElement("input");t.setAttribute("type","checkbox"),t.checked=e.isDone;var i=document.createElement("button");n.innerHTML="Edit",i.innerHTML="Remove";var d=document.createElement("input");d.value=e.text;var c=document.createElement("li");c.appendChild(t),c.appendChild(d),c.appendChild(n),c.appendChild(i),n.addEventListener("click",function(){r(e.id,d.value)}.bind(l)),i.addEventListener("click",function(){o(e.id)}.bind(l)),t.addEventListener("change",function(){u(e.id,t.checked)}.bind(l)),a.appendChild(c)})}};
"use strict";var newTaskInput=null,addTaskButton=null,todoListUl=null,todoService=new TodoServices,updateTaskHandler=function(e,t){todoService.update(e,t)},deleteTaskHandler=function(e){todoService.remove(e)},doneTaskHandler=function(e,t){todoService.update(e,void 0,t)},onTodoListDataChange=function(){var e=todoService.getAll();TodoUiService.renderTasks(todoListUl,e,updateTaskHandler,deleteTaskHandler,doneTaskHandler)};todoService.addEventListener(onTodoListDataChange);var addTaskButtonClick=function(e){console.log("button clicked");var t=newTaskInput.value,n=new TaskModel(t,!1);todoService.add(n),newTaskInput.value=""};function DOMContentCallback(){addTaskButton=document.getElementById("addTaskButton"),newTaskInput=document.getElementById("newTaskInput"),todoListUl=document.getElementById("todoListUl"),addTaskButton.addEventListener("click",addTaskButtonClick),onTodoListDataChange()}document.addEventListener("DOMContentLoaded",DOMContentCallback);